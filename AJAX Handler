function handle_generate_blog_post() {
    if (!isset($_POST['text'])) {
        wp_send_json_error('No text provided');
    }
    $text = sanitize_text_field($_POST['text']);
    
    // Call OpenAI API (replace with your actual API call)
    $api_url = 'https://api.openai.com/v1/completions';
    $response = wp_remote_post($api_url, array(
        'body' => json_encode(array(
            'model' => 'text-davinci-003',
            'prompt' => $text,
            'max_tokens' => 500
        )),
        'headers' => array(
            'Content-Type' => 'application/json',
            'Authorization' => 'Bearer YOUR_OPENAI_API_KEY'
        )
    ));

    if (is_wp_error($response)) {
        wp_send_json_error('API request failed.');
    }

    $body = wp_remote_retrieve_body($response);
    $data = json_decode($body, true);

    if (isset($data['choices'][0]['text'])) {
        wp_send_json_success($data['choices'][0]['text']);
    } else {
        wp_send_json_error('Error in API response.');
    }
}
add_action('wp_ajax_generate_blog_post', 'handle_generate_blog_post');
add_action('wp_ajax_nopriv_generate_blog_post', 'handle_generate_blog_post');
